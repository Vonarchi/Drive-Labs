"use strict";exports.id=674,exports.ids=[674],exports.modules={5577:e=>{function deepClone(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){let t=[];for(let r=0;r<e.length;r++)t[r]=deepClone(e[r]);return t}if("object"==typeof e){let t=Object.create(Object.getPrototypeOf(e));for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=deepClone(e[r]));return t}return e}function parsePath(e){let t=[],r="",i=!1,s=!1,o="";for(let l=0;l<e.length;l++){let a=e[l];i||"."!==a?"["===a?(r&&(t.push(r),r=""),i=!0):"]"===a&&i?(t.push(r),r="",i=!1,s=!1):('"'===a||"'"===a)&&i?s?a===o?(s=!1,o=""):r+=a:(s=!0,o=a):r+=a:r&&(t.push(r),r="")}return r&&t.push(r),t}function setValue(e,t,r){let i=e;for(let e=0;e<t.length-1;e++){let r=t[e];if("object"!=typeof i||null===i||!(r in i)||"object"!=typeof i[r]||null===i[r])return!1;i=i[r]}let s=t[t.length-1];if("*"===s){if(Array.isArray(i))for(let e=0;e<i.length;e++)i[e]=r;else if("object"==typeof i&&null!==i)for(let e in i)Object.prototype.hasOwnProperty.call(i,e)&&(i[e]=r)}else"object"==typeof i&&null!==i&&s in i&&Object.prototype.hasOwnProperty.call(i,s)&&(i[s]=r);return!0}function removeKey(e,t){let r=e;for(let e=0;e<t.length-1;e++){let i=t[e];if("object"!=typeof r||null===r||!(i in r)||"object"!=typeof r[i]||null===r[i])return!1;r=r[i]}let i=t[t.length-1];if("*"===i){if(Array.isArray(r))for(let e=0;e<r.length;e++)r[e]=void 0;else if("object"==typeof r&&null!==r)for(let e in r)Object.prototype.hasOwnProperty.call(r,e)&&delete r[e]}else"object"==typeof r&&null!==r&&i in r&&Object.prototype.hasOwnProperty.call(r,i)&&delete r[i];return!0}let t=Symbol("PATH_NOT_FOUND");function getValueIfExists(e,r){let i=e;for(let e of r){if(null==i||"object"!=typeof i||null===i||!(e in i))return t;i=i[e]}return i}function getValue(e,t){let r=e;for(let e of t){if(null==r||"object"!=typeof r||null===r)return;r=r[e]}return r}function redactPaths(e,r,i,s=!1){for(let o of r){let r=parsePath(o);if(r.includes("*"))redactWildcardPath(e,r,i,o,s);else if(s)removeKey(e,r);else{let s=getValueIfExists(e,r);if(s===t)continue;let o="function"==typeof i?i(s,r):i;setValue(e,r,o)}}}function redactWildcardPath(e,t,r,i,s=!1){let o=t.indexOf("*");if(o===t.length-1){let i=t.slice(0,-1),o=e;for(let e of i){if(null==o||"object"!=typeof o||null===o)return;o=o[e]}if(Array.isArray(o)){if(s)for(let e=0;e<o.length;e++)o[e]=void 0;else for(let e=0;e<o.length;e++){let t=[...i,e.toString()],s="function"==typeof r?r(o[e],t):r;o[e]=s}}else if("object"==typeof o&&null!==o){if(s){let e=[];for(let t in o)Object.prototype.hasOwnProperty.call(o,t)&&e.push(t);for(let t of e)delete o[t]}else for(let e in o){let t=[...i,e],s="function"==typeof r?r(o[e],t):r;o[e]=s}}}else redactIntermediateWildcard(e,t,r,o,i,s)}function redactIntermediateWildcard(e,t,r,i,s,o=!1){let l=t.slice(0,i),a=t.slice(i+1),u=[];function traverse(e,t){if(t===l.length){if(Array.isArray(e))for(let r=0;r<e.length;r++)u[t]=r.toString(),traverse(e[r],t+1);else if("object"==typeof e&&null!==e)for(let r in e)u[t]=r,traverse(e[r],t+1)}else if(t<l.length){let r=l[t];e&&"object"==typeof e&&null!==e&&r in e&&(u[t]=r,traverse(e[r],t+1))}else if(a.includes("*")){let i="function"==typeof r?(e,i)=>{let s=[...u.slice(0,t),...i];return r(e,s)}:r;redactWildcardPath(e,a,i,s,o)}else if(o)removeKey(e,a);else{let i="function"==typeof r?r(getValue(e,a),[...u.slice(0,t),...a]):r;setValue(e,a,i)}}if(0===l.length)traverse(e,0);else{let t=e;for(let e=0;e<l.length;e++){let r=l[e];if(null==t||"object"!=typeof t||null===t)return;t=t[r],u[e]=r}null!=t&&traverse(t,l.length)}}function buildPathStructure(e){if(0===e.length)return null;let t=new Map;for(let r of e){let e=parsePath(r),i=t;for(let t=0;t<e.length;t++){let r=e[t];i.has(r)||i.set(r,new Map),i=i.get(r)}}return t}function selectiveClone(e,t){if(!t)return e;function cloneSelectively(e,t,r=0){if(!t||0===t.size||null===e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e.getTime());if(Array.isArray(e)){let r=[];for(let i=0;i<e.length;i++){let s=i.toString();t.has(s)||t.has("*")?r[i]=cloneSelectively(e[i],t.get(s)||t.get("*")):r[i]=e[i]}return r}let i=Object.create(Object.getPrototypeOf(e));for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t.has(r)||t.has("*")?i[r]=cloneSelectively(e[r],t.get(r)||t.get("*")):i[r]=e[r]);return i}return cloneSelectively(e,t)}function validatePath(e){if("string"!=typeof e)throw Error("Paths must be (non-empty) strings");if(""===e)throw Error("Invalid redaction path ()");if(e.includes("..")||e.includes(","))throw Error(`Invalid redaction path (${e})`);let t=0,r=!1,i="";for(let s=0;s<e.length;s++){let o=e[s];if(('"'===o||"'"===o)&&t>0)r?o===i&&(r=!1,i=""):(r=!0,i=o);else if("["!==o||r){if("]"===o&&!r&&--t<0)throw Error(`Invalid redaction path (${e})`)}else t++}if(0!==t)throw Error(`Invalid redaction path (${e})`)}function validatePaths(e){if(!Array.isArray(e))throw TypeError("paths must be an array");for(let t of e)validatePath(t)}function slowRedact(e={}){let{paths:t=[],censor:r="[REDACTED]",serialize:i=JSON.stringify,strict:s=!0,remove:o=!1}=e;validatePaths(t);let l=buildPathStructure(t);return function(e){if(s&&(null===e||"object"!=typeof e)&&(null==e||"object"!=typeof e))return i?i(e):e;let a=selectiveClone(e,l),u=r;return("function"==typeof r&&(u=r),redactPaths(a,t,u,o),!1===i)?(a.restore=function(){return deepClone(e)},a):"function"==typeof i?i(a):JSON.stringify(a)}}e.exports=slowRedact},7737:e=>{if("undefined"!=typeof SharedArrayBuffer&&"undefined"!=typeof Atomics){let t=new Int32Array(new SharedArrayBuffer(4));function sleep(e){if(!1==(e>0&&e<1/0)){if("number"!=typeof e&&"bigint"!=typeof e)throw TypeError("sleep: ms must be a number");throw RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity")}Atomics.wait(t,0,0,Number(e))}e.exports=sleep}else{function sleep1(e){if(!1==(e>0&&e<1/0)){if("number"!=typeof e&&"bigint"!=typeof e)throw TypeError("sleep: ms must be a number");throw RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity")}let t=Date.now()+Number(e);for(;t>Date.now(););}e.exports=sleep1}},8807:e=>{let t;let r={exit:[],beforeExit:[]},i={exit:onExit,beforeExit:onBeforeExit};function ensureRegistry(){void 0===t&&(t=new FinalizationRegistry(clear))}function install(e){r[e].length>0||process.on(e,i[e])}function uninstall(e){r[e].length>0||(process.removeListener(e,i[e]),0!==r.exit.length||0!==r.beforeExit.length||(t=void 0))}function onExit(){callRefs("exit")}function onBeforeExit(){callRefs("beforeExit")}function callRefs(e){for(let t of r[e]){let r=t.deref(),i=t.fn;void 0!==r&&i(r,e)}r[e]=[]}function clear(e){for(let t of["exit","beforeExit"]){let i=r[t].indexOf(e);r[t].splice(i,i+1),uninstall(t)}}function _register(e,i,s){if(void 0===i)throw Error("the object can't be undefined");install(e);let o=new WeakRef(i);o.fn=s,ensureRegistry(),t.register(i,o),r[e].push(o)}function register(e,t){_register("exit",e,t)}function registerBeforeExit(e,t){_register("beforeExit",e,t)}function unregister(e){if(void 0!==t)for(let i of(t.unregister(e),["exit","beforeExit"]))r[i]=r[i].filter(t=>{let r=t.deref();return r&&r!==e}),uninstall(i)}e.exports={register,registerBeforeExit,unregister}},7629:e=>{function tryStringify(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}function format(e,t,r){var i=r&&r.stringify||tryStringify;if("object"==typeof e&&null!==e){var s=t.length+1;if(1===s)return e;var o=Array(s);o[0]=i(e);for(var l=1;l<s;l++)o[l]=i(t[l]);return o.join(" ")}if("string"!=typeof e)return e;var a=t.length;if(0===a)return e;for(var u="",f=0,c=-1,h=e&&e.length||0,d=0;d<h;){if(37===e.charCodeAt(d)&&d+1<h){switch(c=c>-1?c:0,e.charCodeAt(d+1)){case 100:case 102:if(f>=a||null==t[f])break;c<d&&(u+=e.slice(c,d)),u+=Number(t[f]),c=d+2,d++;break;case 105:if(f>=a||null==t[f])break;c<d&&(u+=e.slice(c,d)),u+=Math.floor(Number(t[f])),c=d+2,d++;break;case 79:case 111:case 106:if(f>=a||void 0===t[f])break;c<d&&(u+=e.slice(c,d));var p=typeof t[f];if("string"===p){u+="'"+t[f]+"'",c=d+2,d++;break}if("function"===p){u+=t[f].name||"<anonymous>",c=d+2,d++;break}u+=i(t[f]),c=d+2,d++;break;case 115:if(f>=a)break;c<d&&(u+=e.slice(c,d)),u+=String(t[f]),c=d+2,d++;break;case 37:c<d&&(u+=e.slice(c,d)),u+="%",c=d+2,d++,f--}++f}++d}return -1===c?e:(c<h&&(u+=e.slice(c)),u)}e.exports=format},8282:(e,t)=>{let{hasOwnProperty:r}=Object.prototype,i=configure();i.configure=configure,i.stringify=i,i.default=i,t.stringify=i,t.configure=configure,e.exports=i;let s=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function strEscape(e){return e.length<5e3&&!s.test(e)?`"${e}"`:JSON.stringify(e)}function sort(e,t){if(e.length>200||t)return e.sort(t);for(let t=1;t<e.length;t++){let r=e[t],i=t;for(;0!==i&&e[i-1]>r;)e[i]=e[i-1],i--;e[i]=r}return e}let o=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function isTypedArrayWithEntries(e){return void 0!==o.call(e)&&0!==e.length}function stringifyTypedArray(e,t,r){e.length<r&&(r=e.length);let i=","===t?"":" ",s=`"0":${i}${e[0]}`;for(let o=1;o<r;o++)s+=`${t}"${o}":${i}${e[o]}`;return s}function getCircularValueOption(e){if(r.call(e,"circularValue")){let t=e.circularValue;if("string"==typeof t)return`"${t}"`;if(null==t)return t;if(t===Error||t===TypeError)return{toString(){throw TypeError("Converting circular structure to JSON")}};throw TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function getDeterministicOption(e){let t;if(r.call(e,"deterministic")&&"boolean"!=typeof(t=e.deterministic)&&"function"!=typeof t)throw TypeError('The "deterministic" argument must be of type boolean or comparator function');return void 0===t||t}function getBooleanOption(e,t){let i;if(r.call(e,t)&&"boolean"!=typeof(i=e[t]))throw TypeError(`The "${t}" argument must be of type boolean`);return void 0===i||i}function getPositiveIntegerOption(e,t){let i;if(r.call(e,t)){if("number"!=typeof(i=e[t]))throw TypeError(`The "${t}" argument must be of type number`);if(!Number.isInteger(i))throw TypeError(`The "${t}" argument must be an integer`);if(i<1)throw RangeError(`The "${t}" argument must be >= 1`)}return void 0===i?1/0:i}function getItemCount(e){return 1===e?"1 item":`${e} items`}function getUniqueReplacerSet(e){let t=new Set;for(let r of e)("string"==typeof r||"number"==typeof r)&&t.add(String(r));return t}function getStrictOption(e){if(r.call(e,"strict")){let t=e.strict;if("boolean"!=typeof t)throw TypeError('The "strict" argument must be of type boolean');if(t)return e=>{let t=`Object can not safely be stringified. Received type ${typeof e}`;throw"function"!=typeof e&&(t+=` (${e.toString()})`),Error(t)}}}function configure(e){e={...e};let t=getStrictOption(e);!t||(void 0===e.bigint&&(e.bigint=!1),"circularValue"in e||(e.circularValue=Error));let r=getCircularValueOption(e),i=getBooleanOption(e,"bigint"),s=getDeterministicOption(e),o="function"==typeof s?s:void 0,l=getPositiveIntegerOption(e,"maximumDepth"),a=getPositiveIntegerOption(e,"maximumBreadth");function stringifyFnReplacer(e,u,f,c,h,d){let p=u[e];switch("object"==typeof p&&null!==p&&"function"==typeof p.toJSON&&(p=p.toJSON(e)),typeof(p=c.call(u,e,p))){case"string":return strEscape(p);case"object":{if(null===p)return"null";if(-1!==f.indexOf(p))return r;let e="",t=",",i=d;if(Array.isArray(p)){if(0===p.length)return"[]";if(l<f.length+1)return'"[Array]"';f.push(p),""!==h&&(d+=h,e+=`
${d}`,t=`,
${d}`);let r=Math.min(p.length,a),s=0;for(;s<r-1;s++){let r=stringifyFnReplacer(String(s),p,f,c,h,d);e+=(void 0!==r?r:"null")+t}let o=stringifyFnReplacer(String(s),p,f,c,h,d);if(e+=void 0!==o?o:"null",p.length-1>a){let r=p.length-a-1;e+=`${t}"... ${getItemCount(r)} not stringified"`}return""!==h&&(e+=`
${i}`),f.pop(),`[${e}]`}let u=Object.keys(p),g=u.length;if(0===g)return"{}";if(l<f.length+1)return'"[Object]"';let y="",m="";""!==h&&(d+=h,t=`,
${d}`,y=" ");let b=Math.min(g,a);s&&!isTypedArrayWithEntries(p)&&(u=sort(u,o)),f.push(p);for(let r=0;r<b;r++){let i=u[r],s=stringifyFnReplacer(i,p,f,c,h,d);void 0!==s&&(e+=`${m}${strEscape(i)}:${y}${s}`,m=t)}if(g>a){let r=g-a;e+=`${m}"...":${y}"${getItemCount(r)} not stringified"`,m=t}return""!==h&&m.length>1&&(e=`
${d}${e}
${i}`),f.pop(),`{${e}}`}case"number":return isFinite(p)?String(p):t?t(p):"null";case"boolean":return!0===p?"true":"false";case"undefined":return;case"bigint":if(i)return String(p);default:return t?t(p):void 0}}function stringifyArrayReplacer(e,s,o,u,f,c){switch("object"==typeof s&&null!==s&&"function"==typeof s.toJSON&&(s=s.toJSON(e)),typeof s){case"string":return strEscape(s);case"object":{if(null===s)return"null";if(-1!==o.indexOf(s))return r;let e=c,t="",i=",";if(Array.isArray(s)){if(0===s.length)return"[]";if(l<o.length+1)return'"[Array]"';o.push(s),""!==f&&(c+=f,t+=`
${c}`,i=`,
${c}`);let r=Math.min(s.length,a),h=0;for(;h<r-1;h++){let e=stringifyArrayReplacer(String(h),s[h],o,u,f,c);t+=(void 0!==e?e:"null")+i}let d=stringifyArrayReplacer(String(h),s[h],o,u,f,c);if(t+=void 0!==d?d:"null",s.length-1>a){let e=s.length-a-1;t+=`${i}"... ${getItemCount(e)} not stringified"`}return""!==f&&(t+=`
${e}`),o.pop(),`[${t}]`}o.push(s);let h="";""!==f&&(c+=f,i=`,
${c}`,h=" ");let d="";for(let e of u){let r=stringifyArrayReplacer(e,s[e],o,u,f,c);void 0!==r&&(t+=`${d}${strEscape(e)}:${h}${r}`,d=i)}return""!==f&&d.length>1&&(t=`
${c}${t}
${e}`),o.pop(),`{${t}}`}case"number":return isFinite(s)?String(s):t?t(s):"null";case"boolean":return!0===s?"true":"false";case"undefined":return;case"bigint":if(i)return String(s);default:return t?t(s):void 0}}function stringifyIndent(e,u,f,c,h){switch(typeof u){case"string":return strEscape(u);case"object":{if(null===u)return"null";if("function"==typeof u.toJSON){if("object"!=typeof(u=u.toJSON(e)))return stringifyIndent(e,u,f,c,h);if(null===u)return"null"}if(-1!==f.indexOf(u))return r;let t=h;if(Array.isArray(u)){if(0===u.length)return"[]";if(l<f.length+1)return'"[Array]"';f.push(u),h+=c;let e=`
${h}`,r=`,
${h}`,i=Math.min(u.length,a),s=0;for(;s<i-1;s++){let t=stringifyIndent(String(s),u[s],f,c,h);e+=(void 0!==t?t:"null")+r}let o=stringifyIndent(String(s),u[s],f,c,h);if(e+=void 0!==o?o:"null",u.length-1>a){let t=u.length-a-1;e+=`${r}"... ${getItemCount(t)} not stringified"`}return e+=`
${t}`,f.pop(),`[${e}]`}let i=Object.keys(u),d=i.length;if(0===d)return"{}";if(l<f.length+1)return'"[Object]"';h+=c;let p=`,
${h}`,g="",y="",m=Math.min(d,a);isTypedArrayWithEntries(u)&&(g+=stringifyTypedArray(u,p,a),i=i.slice(u.length),m-=u.length,y=p),s&&(i=sort(i,o)),f.push(u);for(let e=0;e<m;e++){let t=i[e],r=stringifyIndent(t,u[t],f,c,h);void 0!==r&&(g+=`${y}${strEscape(t)}: ${r}`,y=p)}if(d>a){let e=d-a;g+=`${y}"...": "${getItemCount(e)} not stringified"`,y=p}return""!==y&&(g=`
${h}${g}
${t}`),f.pop(),`{${g}}`}case"number":return isFinite(u)?String(u):t?t(u):"null";case"boolean":return!0===u?"true":"false";case"undefined":return;case"bigint":if(i)return String(u);default:return t?t(u):void 0}}function stringifySimple(e,u,f){switch(typeof u){case"string":return strEscape(u);case"object":{if(null===u)return"null";if("function"==typeof u.toJSON){if("object"!=typeof(u=u.toJSON(e)))return stringifySimple(e,u,f);if(null===u)return"null"}if(-1!==f.indexOf(u))return r;let t="",i=void 0!==u.length;if(i&&Array.isArray(u)){if(0===u.length)return"[]";if(l<f.length+1)return'"[Array]"';f.push(u);let e=Math.min(u.length,a),r=0;for(;r<e-1;r++){let e=stringifySimple(String(r),u[r],f);t+=(void 0!==e?e:"null")+","}let i=stringifySimple(String(r),u[r],f);if(t+=void 0!==i?i:"null",u.length-1>a){let e=u.length-a-1;t+=`,"... ${getItemCount(e)} not stringified"`}return f.pop(),`[${t}]`}let c=Object.keys(u),h=c.length;if(0===h)return"{}";if(l<f.length+1)return'"[Object]"';let d="",p=Math.min(h,a);i&&isTypedArrayWithEntries(u)&&(t+=stringifyTypedArray(u,",",a),c=c.slice(u.length),p-=u.length,d=","),s&&(c=sort(c,o)),f.push(u);for(let e=0;e<p;e++){let r=c[e],i=stringifySimple(r,u[r],f);void 0!==i&&(t+=`${d}${strEscape(r)}:${i}`,d=",")}if(h>a){let e=h-a;t+=`${d}"...":"${getItemCount(e)} not stringified"`}return f.pop(),`{${t}}`}case"number":return isFinite(u)?String(u):t?t(u):"null";case"boolean":return!0===u?"true":"false";case"undefined":return;case"bigint":if(i)return String(u);default:return t?t(u):void 0}}return function(e,t,r){if(arguments.length>1){let i="";if("number"==typeof r?i=" ".repeat(Math.min(r,10)):"string"==typeof r&&(i=r.slice(0,10)),null!=t){if("function"==typeof t)return stringifyFnReplacer("",{"":e},[],t,i,"");if(Array.isArray(t))return stringifyArrayReplacer("",e,[],getUniqueReplacerSet(t),i,"")}if(0!==i.length)return stringifyIndent("",e,[],i,"")}return stringifySimple("",e,[])}}},4762:(e,t,r)=>{let{version:i}=r(1679),{EventEmitter:s}=r(2361),{Worker:o}=r(1267),{join:l}=r(1017),{pathToFileURL:a}=r(7310),{wait:u}=r(741),{WRITE_INDEX:f,READ_INDEX:c}=r(3071),h=r(4300),d=r(9491),p=Symbol("kImpl"),g=h.constants.MAX_STRING_LENGTH;let FakeWeakRef=class FakeWeakRef{constructor(e){this._value=e}deref(){return this._value}};let FakeFinalizationRegistry=class FakeFinalizationRegistry{register(){}unregister(){}};let y=process.env.NODE_V8_COVERAGE?FakeFinalizationRegistry:global.FinalizationRegistry||FakeFinalizationRegistry,m=process.env.NODE_V8_COVERAGE?FakeWeakRef:global.WeakRef||FakeWeakRef,b=new y(e=>{e.exited||e.terminate()});function createWorker(e,t){let{filename:r,workerData:s}=t,u="__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{},f=u["thread-stream-worker"]||l(__dirname,"lib","worker.js"),c=new o(f,{...t.workerOpts,trackUnmanagedFds:!1,workerData:{filename:0===r.indexOf("file://")?r:a(r).href,dataBuf:e[p].dataBuf,stateBuf:e[p].stateBuf,workerData:{$context:{threadStreamVersion:i},...s}}});return c.stream=new FakeWeakRef(e),c.on("message",onWorkerMessage),c.on("exit",onWorkerExit),b.register(e,c),c}function drain(e){d(!e[p].sync),e[p].needDrain&&(e[p].needDrain=!1,e.emit("drain"))}function nextFlush(e){let t=Atomics.load(e[p].state,f),r=e[p].data.length-t;if(r>0){if(0===e[p].buf.length){e[p].flushing=!1,e[p].ending?end(e):e[p].needDrain&&process.nextTick(drain,e);return}let t=e[p].buf.slice(0,r),i=Buffer.byteLength(t);i<=r?(e[p].buf=e[p].buf.slice(r),write(e,t,nextFlush.bind(null,e))):e.flush(()=>{if(!e.destroyed){for(Atomics.store(e[p].state,c,0),Atomics.store(e[p].state,f,0);i>e[p].data.length;)r/=2,t=e[p].buf.slice(0,r),i=Buffer.byteLength(t);e[p].buf=e[p].buf.slice(r),write(e,t,nextFlush.bind(null,e))}})}else if(0===r){if(0===t&&0===e[p].buf.length)return;e.flush(()=>{Atomics.store(e[p].state,c,0),Atomics.store(e[p].state,f,0),nextFlush(e)})}else destroy(e,Error("overwritten"))}function onWorkerMessage(e){let t=this.stream.deref();if(void 0===t){this.exited=!0,this.terminate();return}switch(e.code){case"READY":this.stream=new m(t),t.flush(()=>{t[p].ready=!0,t.emit("ready")});break;case"ERROR":destroy(t,e.err);break;case"EVENT":Array.isArray(e.args)?t.emit(e.name,...e.args):t.emit(e.name,e.args);break;case"WARNING":process.emitWarning(e.err);break;default:destroy(t,Error("this should not happen: "+e.code))}}function onWorkerExit(e){let t=this.stream.deref();void 0!==t&&(b.unregister(t),t.worker.exited=!0,t.worker.off("exit",onWorkerExit),destroy(t,0!==e?Error("the worker thread exited"):null))}let ThreadStream=class ThreadStream extends s{constructor(e={}){if(super(),e.bufferSize<4)throw Error("bufferSize must at least fit a 4-byte utf-8 char");this[p]={},this[p].stateBuf=new SharedArrayBuffer(128),this[p].state=new Int32Array(this[p].stateBuf),this[p].dataBuf=new SharedArrayBuffer(e.bufferSize||4194304),this[p].data=Buffer.from(this[p].dataBuf),this[p].sync=e.sync||!1,this[p].ending=!1,this[p].ended=!1,this[p].needDrain=!1,this[p].destroyed=!1,this[p].flushing=!1,this[p].ready=!1,this[p].finished=!1,this[p].errored=null,this[p].closed=!1,this[p].buf="",this.worker=createWorker(this,e),this.on("message",(e,t)=>{this.worker.postMessage(e,t)})}write(e){if(this[p].destroyed)return error(this,Error("the worker has exited")),!1;if(this[p].ending)return error(this,Error("the worker is ending")),!1;if(this[p].flushing&&this[p].buf.length+e.length>=g)try{writeSync(this),this[p].flushing=!0}catch(e){return destroy(this,e),!1}if(this[p].buf+=e,this[p].sync)try{return writeSync(this),!0}catch(e){return destroy(this,e),!1}return this[p].flushing||(this[p].flushing=!0,setImmediate(nextFlush,this)),this[p].needDrain=this[p].data.length-this[p].buf.length-Atomics.load(this[p].state,f)<=0,!this[p].needDrain}end(){this[p].destroyed||(this[p].ending=!0,end(this))}flush(e){if(this[p].destroyed){"function"==typeof e&&process.nextTick(e,Error("the worker has exited"));return}let t=Atomics.load(this[p].state,f);u(this[p].state,c,t,1/0,(t,r)=>{if(t){destroy(this,t),process.nextTick(e,t);return}if("not-equal"===r){this.flush(e);return}process.nextTick(e)})}flushSync(){this[p].destroyed||(writeSync(this),flushSync(this))}unref(){this.worker.unref()}ref(){this.worker.ref()}get ready(){return this[p].ready}get destroyed(){return this[p].destroyed}get closed(){return this[p].closed}get writable(){return!this[p].destroyed&&!this[p].ending}get writableEnded(){return this[p].ending}get writableFinished(){return this[p].finished}get writableNeedDrain(){return this[p].needDrain}get writableObjectMode(){return!1}get writableErrored(){return this[p].errored}};function error(e,t){setImmediate(()=>{e.emit("error",t)})}function destroy(e,t){e[p].destroyed||(e[p].destroyed=!0,t&&(e[p].errored=t,error(e,t)),e.worker.exited?setImmediate(()=>{e[p].closed=!0,e.emit("close")}):e.worker.terminate().catch(()=>{}).then(()=>{e[p].closed=!0,e.emit("close")}))}function write(e,t,r){let i=Atomics.load(e[p].state,f),s=Buffer.byteLength(t);return e[p].data.write(t,i),Atomics.store(e[p].state,f,i+s),Atomics.notify(e[p].state,f),r(),!0}function end(e){if(!e[p].ended&&e[p].ending&&!e[p].flushing){e[p].ended=!0;try{e.flushSync();let t=Atomics.load(e[p].state,c);Atomics.store(e[p].state,f,-1),Atomics.notify(e[p].state,f);let r=0;for(;-1!==t;){if(Atomics.wait(e[p].state,c,t,1e3),t=Atomics.load(e[p].state,c),-2===t){destroy(e,Error("end() failed"));return}if(10==++r){destroy(e,Error("end() took too long (10s)"));return}}process.nextTick(()=>{e[p].finished=!0,e.emit("finish")})}catch(t){destroy(e,t)}}}function writeSync(e){let cb=()=>{e[p].ending?end(e):e[p].needDrain&&process.nextTick(drain,e)};for(e[p].flushing=!1;0!==e[p].buf.length;){let t=Atomics.load(e[p].state,f),r=e[p].data.length-t;if(0===r){flushSync(e),Atomics.store(e[p].state,c,0),Atomics.store(e[p].state,f,0);continue}if(r<0)throw Error("overwritten");let i=e[p].buf.slice(0,r),s=Buffer.byteLength(i);if(s<=r)e[p].buf=e[p].buf.slice(r),write(e,i,cb);else{for(flushSync(e),Atomics.store(e[p].state,c,0),Atomics.store(e[p].state,f,0);s>e[p].buf.length;)r/=2,i=e[p].buf.slice(0,r),s=Buffer.byteLength(i);e[p].buf=e[p].buf.slice(r),write(e,i,cb)}}}function flushSync(e){if(e[p].flushing)throw Error("unable to flush while flushing");let t=Atomics.load(e[p].state,f),r=0;for(;;){let i=Atomics.load(e[p].state,c);if(-2===i)throw Error("_flushSync failed");if(i!==t)Atomics.wait(e[p].state,c,i,1e3);else break;if(10==++r)throw Error("_flushSync took too long (10s)")}}e.exports=ThreadStream},3071:e=>{e.exports={WRITE_INDEX:4,READ_INDEX:8}},741:e=>{function wait(e,t,r,i,s){let o=Date.now()+i,l=Atomics.load(e,t);if(l===r){s(null,"ok");return}let a=l,check=i=>{Date.now()>o?s(null,"timed-out"):setTimeout(()=>{a=l,(l=Atomics.load(e,t))===a?check(i>=1e3?1e3:2*i):l===r?s(null,"ok"):s(null,"not-equal")},i)};check(1)}function waitDiff(e,t,r,i,s){let o=Date.now()+i,l=Atomics.load(e,t);if(l!==r){s(null,"ok");return}let check=i=>{Date.now()>o?s(null,"timed-out"):setTimeout(()=>{(l=Atomics.load(e,t))!==r?s(null,"ok"):check(i>=1e3?1e3:2*i)},i)};check(1)}e.exports={wait,waitDiff}},3900:(e,t,r)=>{let i=r(3355),s=r(1680),o=r(5225),l=r(3997);e.exports={err:i,errWithCause:s,mapHttpRequest:o.mapHttpRequest,mapHttpResponse:l.mapHttpResponse,req:o.reqSerializer,res:l.resSerializer,wrapErrorSerializer:function(e){return e===i?e:function(t){return e(i(t))}},wrapRequestSerializer:function(e){return e===o.reqSerializer?e:function(t){return e(o.reqSerializer(t))}},wrapResponseSerializer:function(e){return e===l.resSerializer?e:function(t){return e(l.resSerializer(t))}}}},2804:e=>{let isErrorLike=e=>e&&"string"==typeof e.message,getErrorCause=e=>{if(!e)return;let t=e.cause;if("function"!=typeof t)return isErrorLike(t)?t:void 0;{let t=e.cause();return isErrorLike(t)?t:void 0}},_stackWithCauses=(e,t)=>{if(!isErrorLike(e))return"";let r=e.stack||"";if(t.has(e))return r+"\ncauses have become circular...";let i=getErrorCause(e);return i?(t.add(e),r+"\ncaused by: "+_stackWithCauses(i,t)):r},_messageWithCauses=(e,t,r)=>{if(!isErrorLike(e))return"";let i=r?"":e.message||"";if(t.has(e))return i+": ...";let s=getErrorCause(e);if(!s)return i;{t.add(e);let r="function"==typeof e.cause;return i+(r?"":": ")+_messageWithCauses(s,t,r)}};e.exports={isErrorLike,getErrorCause,stackWithCauses:e=>_stackWithCauses(e,new Set),messageWithCauses:e=>_messageWithCauses(e,new Set)}},3855:e=>{let t=Symbol("circular-ref-tag"),r=Symbol("pino-raw-err-ref"),i=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},aggregateErrors:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[r]},set:function(e){this[r]=e}}});Object.defineProperty(i,r,{writable:!0,value:{}}),e.exports={pinoErrProto:i,pinoErrorSymbols:{seen:t,rawSymbol:r}}},1680:(e,t,r)=>{e.exports=errWithCauseSerializer;let{isErrorLike:i}=r(2804),{pinoErrProto:s,pinoErrorSymbols:o}=r(3855),{seen:l}=o,{toString:a}=Object.prototype;function errWithCauseSerializer(e){if(!i(e))return e;e[l]=void 0;let t=Object.create(s);for(let r in t.type="[object Function]"===a.call(e.constructor)?e.constructor.name:e.name,t.message=e.message,t.stack=e.stack,Array.isArray(e.errors)&&(t.aggregateErrors=e.errors.map(e=>errWithCauseSerializer(e))),i(e.cause)&&!Object.prototype.hasOwnProperty.call(e.cause,l)&&(t.cause=errWithCauseSerializer(e.cause)),e)if(void 0===t[r]){let s=e[r];i(s)?Object.prototype.hasOwnProperty.call(s,l)||(t[r]=errWithCauseSerializer(s)):t[r]=s}return delete e[l],t.raw=e,t}},3355:(e,t,r)=>{e.exports=errSerializer;let{messageWithCauses:i,stackWithCauses:s,isErrorLike:o}=r(2804),{pinoErrProto:l,pinoErrorSymbols:a}=r(3855),{seen:u}=a,{toString:f}=Object.prototype;function errSerializer(e){if(!o(e))return e;e[u]=void 0;let t=Object.create(l);for(let r in t.type="[object Function]"===f.call(e.constructor)?e.constructor.name:e.name,t.message=i(e),t.stack=s(e),Array.isArray(e.errors)&&(t.aggregateErrors=e.errors.map(e=>errSerializer(e))),e)if(void 0===t[r]){let i=e[r];o(i)?"cause"===r||Object.prototype.hasOwnProperty.call(i,u)||(t[r]=errSerializer(i)):t[r]=i}return delete e[u],t.raw=e,t}},5225:e=>{e.exports={mapHttpRequest,reqSerializer};let t=Symbol("pino-raw-req-ref"),r=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[t]},set:function(e){this[t]=e}}});function reqSerializer(e){let t=e.info||e.socket,i=Object.create(r);if(i.id="function"==typeof e.id?e.id():e.id||(e.info?e.info.id:void 0),i.method=e.method,e.originalUrl)i.url=e.originalUrl;else{let t=e.path;i.url="string"==typeof t?t:e.url?e.url.path||e.url:void 0}return e.query&&(i.query=e.query),e.params&&(i.params=e.params),i.headers=e.headers,i.remoteAddress=t&&t.remoteAddress,i.remotePort=t&&t.remotePort,i.raw=e.raw||e,i}function mapHttpRequest(e){return{req:reqSerializer(e)}}Object.defineProperty(r,t,{writable:!0,value:{}})},3997:e=>{e.exports={mapHttpResponse,resSerializer};let t=Symbol("pino-raw-res-ref"),r=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[t]},set:function(e){this[t]=e}}});function resSerializer(e){let t=Object.create(r);return t.statusCode=e.headersSent?e.statusCode:null,t.headers=e.getHeaders?e.getHeaders():e._headers,t.raw=e,t}function mapHttpResponse(e){return{res:resSerializer(e)}}Object.defineProperty(r,t,{writable:!0,value:{}})},9244:e=>{function noOpPrepareStackTrace(e,t){return t}e.exports=function(){let e=Error.prepareStackTrace;Error.prepareStackTrace=noOpPrepareStackTrace;let t=Error().stack;if(Error.prepareStackTrace=e,!Array.isArray(t))return;let r=t.slice(2),i=[];for(let e of r)e&&i.push(e.getFileName());return i}},240:e=>{e.exports={DEFAULT_LEVELS:{trace:10,debug:20,info:30,warn:40,error:50,fatal:60},SORTING_ORDER:{ASC:"ASC",DESC:"DESC"}}},7635:(e,t,r)=>{let{lsCacheSym:i,levelValSym:s,useOnlyCustomLevelsSym:o,streamSym:l,formattersSym:a,hooksSym:u,levelCompSym:f}=r(2307),{noop:c,genLog:h}=r(4889),{DEFAULT_LEVELS:d,SORTING_ORDER:p}=r(240),g={fatal:e=>{let t=h(d.fatal,e);return function(...e){let r=this[l];if(t.call(this,...e),"function"==typeof r.flushSync)try{r.flushSync()}catch(e){}}},error:e=>h(d.error,e),warn:e=>h(d.warn,e),info:e=>h(d.info,e),debug:e=>h(d.debug,e),trace:e=>h(d.trace,e)},y=Object.keys(d).reduce((e,t)=>(e[d[t]]=t,e),{}),m=Object.keys(y).reduce((e,t)=>(e[t]='{"level":'+Number(t),e),{});function genLsCache(e){let t=e[a].level,{labels:r}=e.levels,s={};for(let e in r){let i=t(r[e],Number(e));s[e]=JSON.stringify(i).slice(0,-1)}return e[i]=s,e}function isStandardLevel(e,t){if(t)return!1;switch(e){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}function setLevel(e){let{labels:t,values:r}=this.levels;if("number"==typeof e){if(void 0===t[e])throw Error("unknown level value"+e);e=t[e]}if(void 0===r[e])throw Error("unknown level "+e);let i=this[s],l=this[s]=r[e],a=this[o],d=this[f],p=this[u].logMethod;for(let e in r){if(!1===d(r[e],l)){this[e]=c;continue}this[e]=isStandardLevel(e,a)?g[e](p):h(r[e],p)}this.emit("level-change",e,l,t[i],i,this)}function getLevel(e){let{levels:t,levelVal:r}=this;return t&&t.labels?t.labels[r]:""}function isLevelEnabled(e){let{values:t}=this.levels,r=t[e];return void 0!==r&&this[f](r,this[s])}function compareLevel(e,t,r){return e===p.DESC?t<=r:t>=r}function genLevelComparison(e){return"string"==typeof e?compareLevel.bind(null,e):e}function mappings(e=null,t=!1){let r=e?Object.keys(e).reduce((t,r)=>(t[e[r]]=r,t),{}):null,i=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),t?null:y,r),s=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),t?null:d,e);return{labels:i,values:s}}function assertDefaultLevelFound(e,t,r){if("number"==typeof e){let i=[].concat(Object.keys(t||{}).map(e=>t[e]),r?[]:Object.keys(y).map(e=>+e),1/0);if(!i.includes(e))throw Error(`default level:${e} must be included in custom levels`);return}let i=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),r?null:d,t);if(!(e in i))throw Error(`default level:${e} must be included in custom levels`)}function assertNoLevelCollisions(e,t){let{labels:r,values:i}=e;for(let e in t){if(e in i)throw Error("levels cannot be overridden");if(t[e]in r)throw Error("pre-existing level values cannot be used for new levels")}}function assertLevelComparison(e){if(!("function"==typeof e||"string"==typeof e&&Object.values(p).includes(e)))throw Error('Levels comparison should be one of "ASC", "DESC" or "function" type')}e.exports={initialLsCache:m,genLsCache,levelMethods:g,getLevel,setLevel,isLevelEnabled,mappings,assertNoLevelCollisions,assertDefaultLevelFound,genLevelComparison,assertLevelComparison}},2263:e=>{e.exports={version:"10.1.0"}},2425:(e,t,r)=>{let i=Symbol.for("pino.metadata"),{DEFAULT_LEVELS:s}=r(240),o=s.info;function multistream(e,t){e=e||[],t=t||{dedupe:!1};let r=Object.create(s);r.silent=1/0,t.levels&&"object"==typeof t.levels&&Object.keys(t.levels).forEach(e=>{r[e]=t.levels[e]});let l={write,add,remove,emit,flushSync,end,minLevel:0,lastId:0,streams:[],clone,[i]:!0,streamLevels:r};return Array.isArray(e)?e.forEach(add,l):add.call(l,e),e=null,l;function write(e){let r,s;let o=this.lastLevel,{streams:l}=this,a=0;for(let u=initLoopVar(l.length,t.dedupe);checkLoopVar(u,l.length,t.dedupe);u=adjustLoopVar(u,t.dedupe))if((r=l[u]).level<=o){if(0!==a&&a!==r.level)break;if((s=r.stream)[i]){let{lastTime:e,lastMsg:t,lastObj:r,lastLogger:i}=this;s.lastLevel=o,s.lastTime=e,s.lastMsg=t,s.lastObj=r,s.lastLogger=i}s.write(e),t.dedupe&&(a=r.level)}else if(!t.dedupe)break}function emit(...e){for(let{stream:t}of this.streams)"function"==typeof t.emit&&t.emit(...e)}function flushSync(){for(let{stream:e}of this.streams)"function"==typeof e.flushSync&&e.flushSync()}function add(e){let t;if(!e)return l;let r="function"==typeof e.write||e.stream,i=e.write?e:e.stream;if(!r)throw Error("stream object needs to implement either StreamEntry or DestinationStream interface");let{streams:s,streamLevels:a}=this;t="number"==typeof e.levelVal?e.levelVal:"string"==typeof e.level?a[e.level]:"number"==typeof e.level?e.level:o;let u={stream:i,level:t,levelVal:void 0,id:++l.lastId};return s.unshift(u),s.sort(compareByLevel),this.minLevel=s[0].level,l}function remove(e){let{streams:t}=this,r=t.findIndex(t=>t.id===e);return r>=0&&(t.splice(r,1),t.sort(compareByLevel),this.minLevel=t.length>0?t[0].level:-1),l}function end(){for(let{stream:e}of this.streams)"function"==typeof e.flushSync&&e.flushSync(),e.end()}function clone(e){let t=Array(this.streams.length);for(let r=0;r<t.length;r++)t[r]={level:e,stream:this.streams[r].stream};return{write,add,remove,minLevel:e,streams:t,clone,emit,flushSync,[i]:!0}}}function compareByLevel(e,t){return e.level-t.level}function initLoopVar(e,t){return t?e-1:0}function adjustLoopVar(e,t){return t?e-1:e+1}function checkLoopVar(e,t,r){return r?e>=0:e<t}e.exports=multistream},2588:(e,t,r)=>{let{EventEmitter:i}=r(5673),{lsCacheSym:s,levelValSym:o,setLevelSym:l,getLevelSym:a,chindingsSym:u,mixinSym:f,asJsonSym:c,writeSym:h,mixinMergeStrategySym:d,timeSym:p,timeSliceIndexSym:g,streamSym:y,serializersSym:m,formattersSym:b,errorKeySym:w,messageKeySym:v,useOnlyCustomLevelsSym:S,needsMetadataGsym:_,redactFmtSym:E,stringifySym:O,formatOptsSym:x,stringifiersSym:k,msgPrefixSym:j,hooksSym:A}=r(2307),{getLevel:B,setLevel:C,isLevelEnabled:L,mappings:$,initialLsCache:T,genLsCache:P,assertNoLevelCollisions:D}=r(7635),{asChindings:W,asJson:F,buildFormatters:I,stringify:N,noop:R}=r(4889),{version:z}=r(2263),V=r(860),M={constructor:class{},child,bindings,setBindings,flush,isLevelEnabled:L,version:z,get level(){return this[a]()},set level(lvl){this[l](lvl)},get levelVal(){return this[o]},set levelVal(n){throw Error("levelVal is read-only")},get msgPrefix(){return this[j]},get[Symbol.toStringTag](){return"Pino"},[s]:T,[h]:write,[c]:F,[a]:B,[l]:C};Object.setPrototypeOf(M,i.prototype),e.exports=function(){return Object.create(M)};let resetChildingsFormatter=e=>e;function child(e,t){if(!e)throw Error("missing bindings for child Pino");let r=this[m],i=this[b],s=Object.create(this);if(null==t)return s[b].bindings!==resetChildingsFormatter&&(s[b]=I(i.level,resetChildingsFormatter,i.log)),s[u]=W(s,e),this.onChild!==R&&this.onChild(s),s;if(!0===t.hasOwnProperty("serializers")){for(let e in s[m]=Object.create(null),r)s[m][e]=r[e];let e=Object.getOwnPropertySymbols(r);for(var o=0;o<e.length;o++){let t=e[o];s[m][t]=r[t]}for(let e in t.serializers)s[m][e]=t.serializers[e];let i=Object.getOwnPropertySymbols(t.serializers);for(var a=0;a<i.length;a++){let e=i[a];s[m][e]=t.serializers[e]}}else s[m]=r;if(t.hasOwnProperty("formatters")){let{level:e,bindings:r,log:o}=t.formatters;s[b]=I(e||i.level,r||resetChildingsFormatter,o||i.log)}else s[b]=I(i.level,resetChildingsFormatter,i.log);if(!0===t.hasOwnProperty("customLevels")&&(D(this.levels,t.customLevels),s.levels=$(t.customLevels,s[S]),P(s)),"object"==typeof t.redact&&null!==t.redact||Array.isArray(t.redact)){s.redact=t.redact;let e=V(s.redact,N),r={stringify:e[E]};s[O]=N,s[k]=e,s[x]=r}if("string"==typeof t.msgPrefix&&(s[j]=(this[j]||"")+t.msgPrefix),s[u]=W(s,e),void 0!==t.level&&t.level!==this.level||t.hasOwnProperty("customLevels")){let e=t.level||this.level;s[l](e)}return this.onChild(s),s}function bindings(){let e=this[u],t=`{${e.substr(1)}}`,r=JSON.parse(t);return delete r.pid,delete r.hostname,r}function setBindings(e){let t=W(this,e);this[u]=t}function defaultMixinMergeStrategy(e,t){return Object.assign(t,e)}function write(e,t,r){let i;let s=this[p](),o=this[f],l=this[w],a=this[v],u=this[d]||defaultMixinMergeStrategy,h=this[A].streamWrite;null==e?i={}:e instanceof Error?(i={[l]:e},void 0===t&&(t=e.message)):(i=e,void 0===t&&void 0===e[a]&&e[l]&&(t=e[l].message)),o&&(i=u(i,o(i,r,this)));let m=this[c](i,t,r,s),b=this[y];!0===b[_]&&(b.lastLevel=r,b.lastObj=i,b.lastMsg=t,b.lastTime=s.slice(this[g]),b.lastLogger=this),b.write(h?h(m):m)}function flush(e){if(null!=e&&"function"!=typeof e)throw Error("callback must be a function");let t=this[y];"function"==typeof t.flush?t.flush(e||R):e&&e()}},860:(e,t,r)=>{let i=r(5577),{redactFmtSym:s,wildcardFirstSym:o}=r(2307),l=/[^.[\]]+|\[([^[\]]*?)\]/g,a="[Redacted]";function redaction(e,t){let{paths:r,censor:a,remove:u}=handle(e),f=r.reduce((e,t)=>{l.lastIndex=0;let r=l.exec(t),i=l.exec(t),s=void 0!==r[1]?r[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):r[0];if("*"===s&&(s=o),null===i)return e[s]=null,e;if(null===e[s])return e;let{index:a}=i,u=`${t.substr(a,t.length-1)}`;return e[s]=e[s]||[],s!==o&&0===e[s].length&&e[s].push(...e[o]||[]),s===o&&Object.keys(e).forEach(function(t){e[t]&&e[t].push(u)}),e[s].push(u),e},{}),c={[s]:i({paths:r,censor:a,serialize:t,strict:!1,remove:u})},topCensor=(...e)=>"function"==typeof a?t(a(...e)):t(a);return[...Object.keys(f),...Object.getOwnPropertySymbols(f)].reduce((e,r)=>{if(null===f[r])e[r]=e=>topCensor(e,[r]);else{let s="function"==typeof a?(e,t)=>a(e,[r,...t]):a;e[r]=i({paths:f[r],censor:s,serialize:t,strict:!1,remove:u})}return e},c)}function handle(e){if(Array.isArray(e))return e={paths:e,censor:a};let{paths:t,censor:r=a,remove:i}=e;if(!1===Array.isArray(t))throw Error("pino – redact must contain an array of strings");return!0===i&&(r=void 0),{paths:t,censor:r,remove:i}}e.exports=redaction},2307:e=>{let t=Symbol("pino.setLevel"),r=Symbol("pino.getLevel"),i=Symbol("pino.levelVal"),s=Symbol("pino.levelComp"),o=Symbol("pino.useLevelLabels"),l=Symbol("pino.useOnlyCustomLevels"),a=Symbol("pino.mixin"),u=Symbol("pino.lsCache"),f=Symbol("pino.chindings"),c=Symbol("pino.asJson"),h=Symbol("pino.write"),d=Symbol("pino.redactFmt"),p=Symbol("pino.time"),g=Symbol("pino.timeSliceIndex"),y=Symbol("pino.stream"),m=Symbol("pino.stringify"),b=Symbol("pino.stringifySafe"),w=Symbol("pino.stringifiers"),v=Symbol("pino.end"),S=Symbol("pino.formatOpts"),_=Symbol("pino.messageKey"),E=Symbol("pino.errorKey"),O=Symbol("pino.nestedKey"),x=Symbol("pino.nestedKeyStr"),k=Symbol("pino.mixinMergeStrategy"),j=Symbol("pino.msgPrefix"),A=Symbol("pino.wildcardFirst"),B=Symbol.for("pino.serializers"),C=Symbol.for("pino.formatters"),L=Symbol.for("pino.hooks"),$=Symbol.for("pino.metadata");e.exports={setLevelSym:t,getLevelSym:r,levelValSym:i,levelCompSym:s,useLevelLabelsSym:o,mixinSym:a,lsCacheSym:u,chindingsSym:f,asJsonSym:c,writeSym:h,serializersSym:B,redactFmtSym:d,timeSym:p,timeSliceIndexSym:g,streamSym:y,stringifySym:m,stringifySafeSym:b,stringifiersSym:w,endSym:v,formatOptsSym:S,messageKeySym:_,errorKeySym:E,nestedKeySym:O,wildcardFirstSym:A,needsMetadataGsym:$,useOnlyCustomLevelsSym:l,formattersSym:C,hooksSym:L,nestedKeyStrSym:x,mixinMergeStrategySym:k,msgPrefixSym:j}},3328:e=>{let t=1000000n*BigInt(Date.now()),r=process.hrtime.bigint();e.exports={nullTime:()=>"",epochTime:()=>`,"time":${Date.now()}`,unixTime:()=>`,"time":${Math.round(Date.now()/1e3)}`,isoTime:()=>`,"time":"${new Date(Date.now()).toISOString()}"`,isoTimeNano:()=>{let e=process.hrtime.bigint()-r,i=t+e,s=i%1000000000n,o=Number(1000n*(i/1000000000n)+s/1000000n),l=new Date(o),a=l.getUTCFullYear(),u=(l.getUTCMonth()+1).toString().padStart(2,"0"),f=l.getUTCDate().toString().padStart(2,"0"),c=l.getUTCHours().toString().padStart(2,"0"),h=l.getUTCMinutes().toString().padStart(2,"0"),d=l.getUTCSeconds().toString().padStart(2,"0");return`,"time":"${a}-${u}-${f}T${c}:${h}:${d}.${s.toString().padStart(9,"0")}Z"`}}},4889:(e,t,r)=>{let i=r(5714),s=r(7629),{mapHttpRequest:o,mapHttpResponse:l}=r(3900),a=r(8895),u=r(8807),{lsCacheSym:f,chindingsSym:c,writeSym:h,serializersSym:d,formatOptsSym:p,endSym:g,stringifiersSym:y,stringifySym:m,stringifySafeSym:b,wildcardFirstSym:w,nestedKeySym:v,formattersSym:S,messageKeySym:_,errorKeySym:E,nestedKeyStrSym:O,msgPrefixSym:x}=r(2307),{isMainThread:k}=r(1267),j=r(2713),A=i.tracingChannel("pino_asJson");function noop(){}function genLog(e,t){if(!t)return LOG;return function(...r){t.call(this,r,LOG,e)};function LOG(t,...r){if("object"==typeof t){let i,a=t;null!==t&&(t.method&&t.headers&&t.socket?t=o(t):"function"==typeof t.setHeader&&(t=l(t))),null===a&&0===r.length?i=[null]:(a=r.shift(),i=r),"string"==typeof this[x]&&null!=a&&(a=this[x]+a),this[h](t,s(a,i,this[p]),e)}else{let i=void 0===t?r.shift():t;"string"==typeof this[x]&&null!=i&&(i=this[x]+i),this[h](null,s(i,r,this[p]),e)}}}function asString(e){let t="",r=0,i=!1,s=255,o=e.length;if(o>100)return JSON.stringify(e);for(var l=0;l<o&&s>=32;l++)(34===(s=e.charCodeAt(l))||92===s)&&(t+=e.slice(r,l)+"\\",r=l,i=!0);return i?t+=e.slice(r):t=e,s<32?JSON.stringify(e):'"'+t+'"'}function asJson(e,t,r,i){return!1===A.hasSubscribers?_asJson.call(this,e,t,r,i):A.traceSync(_asJson,{instance:this,arguments},this,e,t,r,i)}function _asJson(e,t,r,i){let s;let o=this[m],l=this[b],a=this[y],u=this[g],h=this[c],p=this[d],x=this[S],k=this[_],j=this[E],A=this[f][r]+i;A+=h,x.log&&(e=x.log(e));let B=a[w],C="";for(let t in e)if(s=e[t],Object.prototype.hasOwnProperty.call(e,t)&&void 0!==s){p[t]?s=p[t](s):t===j&&p.err&&(s=p.err(s));let e=a[t]||B;switch(typeof s){case"undefined":case"function":continue;case"number":!1===Number.isFinite(s)&&(s=null);case"boolean":e&&(s=e(s));break;case"string":s=(e||asString)(s);break;default:s=(e||o)(s,l)}if(void 0===s)continue;let r=asString(t);C+=","+r+":"+s}let L="";if(void 0!==t){s=p[k]?p[k](t):t;let e=a[k]||B;switch(typeof s){case"function":break;case"number":!1===Number.isFinite(s)&&(s=null);case"boolean":e&&(s=e(s)),L=',"'+k+'":'+s;break;case"string":L=',"'+k+'":'+(s=(e||asString)(s));break;default:L=',"'+k+'":'+(s=(e||o)(s,l))}}return this[v]&&C?A+this[O]+C.slice(1)+"}"+L+u:A+C+L+u}function asChindings(e,t){let r;let i=e[c],s=e[m],o=e[b],l=e[y],a=l[w],u=e[d],f=e[S].bindings;for(let e in t=f(t)){r=t[e];let f=(e.length<5||"level"!==e&&"serializers"!==e&&"formatters"!==e&&"customLevels"!==e)&&t.hasOwnProperty(e)&&void 0!==r;if(!0===f){if(r=u[e]?u[e](r):r,void 0===(r=(l[e]||a||s)(r,o)))continue;i+=',"'+e+'":'+r}}return i}function hasBeenTampered(e){return e.write!==e.constructor.prototype.write}function buildSafeSonicBoom(e){let t=new a(e);return t.on("error",filterBrokenPipe),!e.sync&&k&&(u.register(t,autoEnd),t.on("close",function(){u.unregister(t)})),t;function filterBrokenPipe(e){if("EPIPE"===e.code){t.write=noop,t.end=noop,t.flushSync=noop,t.destroy=noop;return}t.removeListener("error",filterBrokenPipe),t.emit("error",e)}}function autoEnd(e,t){e.destroyed||("beforeExit"===t?(e.flush(),e.on("drain",function(){e.end()})):e.flushSync())}function createArgsNormalizer(e){return function(t,r,i={},s){if("string"==typeof i)s=buildSafeSonicBoom({dest:i}),i={};else if("string"==typeof s){if(i&&i.transport)throw Error("only one of option.transport or stream can be specified");s=buildSafeSonicBoom({dest:s})}else if(i instanceof a||i.writable||i._writableState)s=i,i={};else if(i.transport){let e;if(i.transport instanceof a||i.transport.writable||i.transport._writableState)throw Error("option.transport do not allow stream, please pass to option directly. e.g. pino(transport)");if(i.transport.targets&&i.transport.targets.length&&i.formatters&&"function"==typeof i.formatters.level)throw Error("option.transport.targets do not allow custom level formatters");i.customLevels&&(e=i.useOnlyCustomLevels?i.customLevels:Object.assign({},i.levels,i.customLevels)),s=j({caller:r,...i.transport,levels:e})}if((i=Object.assign({},e,i)).serializers=Object.assign({},e.serializers,i.serializers),i.formatters=Object.assign({},e.formatters,i.formatters),i.prettyPrint)throw Error("prettyPrint option is no longer supported, see the pino-pretty package (https://github.com/pinojs/pino-pretty)");let{enabled:o,onChild:l}=i;return!1===o&&(i.level="silent"),l||(i.onChild=noop),s||(s=hasBeenTampered(process.stdout)?process.stdout:buildSafeSonicBoom({fd:process.stdout.fd||1})),{opts:i,stream:s}}}function stringify(e,t){try{return JSON.stringify(e)}catch(r){try{let r=t||this[b];return r(e)}catch(e){return'"[unable to serialize, circular reference is too complex to analyze]"'}}}function buildFormatters(e,t,r){return{level:e,bindings:t,log:r}}function normalizeDestFileDescriptor(e){let t=Number(e);return"string"==typeof e&&Number.isFinite(t)?t:void 0===e?1:e}e.exports={noop,buildSafeSonicBoom,asChindings,asJson,genLog,createArgsNormalizer,stringify,buildFormatters,normalizeDestFileDescriptor}},2713:(e,t,r)=>{let{createRequire:i}=r(8188),s=r(9244),{join:o,isAbsolute:l,sep:a}=r(9411),u=r(7737),f=r(8807),c=r(4762);function setupOnExit(e){f.register(e,autoEnd),f.registerBeforeExit(e,flush),e.on("close",function(){f.unregister(e)})}function buildStream(e,t,r,i){let s=new c({filename:e,workerData:t,workerOpts:r,sync:i});function onReady(){process.removeListener("exit",onExit),s.unref(),!1!==r.autoEnd&&setupOnExit(s)}function onExit(){s.closed||(s.flushSync(),u(100),s.end())}return s.on("ready",onReady),s.on("close",function(){process.removeListener("exit",onExit)}),process.on("exit",onExit),s}function autoEnd(e){e.ref(),e.flushSync(),e.end(),e.once("close",function(){e.unref()})}function flush(e){e.flushSync()}function transport(e){let{pipeline:t,targets:r,levels:u,dedupe:f,worker:c={},caller:h=s(),sync:d=!1}=e,p={...e.options},g="string"==typeof h?[h]:h,y="__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{},m=e.target;if(m&&r)throw Error("only one of target or targets can be specified");return r?(m=y["pino-worker"]||o(__dirname,"worker.js"),p.targets=r.filter(e=>e.target).map(e=>({...e,target:fixTarget(e.target)})),p.pipelines=r.filter(e=>e.pipeline).map(e=>e.pipeline.map(t=>({...t,level:e.level,target:fixTarget(t.target)})))):t&&(m=y["pino-worker"]||o(__dirname,"worker.js"),p.pipelines=[t.map(e=>({...e,target:fixTarget(e.target)}))]),u&&(p.levels=u),f&&(p.dedupe=f),p.pinoWillSendConfig=!0,buildStream(fixTarget(m),p,c,d);function fixTarget(e){let t;if(l(e=y[e]||e)||0===e.indexOf("file://"))return e;if("pino/file"===e)return o(__dirname,"..","file.js");for(let r of g)try{let s="node:repl"===r?process.cwd()+a:r;t=i(s).resolve(e);break}catch(e){continue}if(!t)throw Error(`unable to determine transport target for "${e}"`);return t}}e.exports=transport},7674:(e,t,r)=>{let i=r(612),s=r(3900),o=r(9244),l=r(860),a=r(3328),u=r(2588),f=r(2307),{configure:c}=r(8282),{assertDefaultLevelFound:h,mappings:d,genLsCache:p,genLevelComparison:g,assertLevelComparison:y}=r(7635),{DEFAULT_LEVELS:m,SORTING_ORDER:b}=r(240),{createArgsNormalizer:w,asChindings:v,buildSafeSonicBoom:S,buildFormatters:_,stringify:E,normalizeDestFileDescriptor:O,noop:x}=r(4889),{version:k}=r(2263),{chindingsSym:j,redactFmtSym:A,serializersSym:B,timeSym:C,timeSliceIndexSym:L,streamSym:$,stringifySym:T,stringifySafeSym:P,stringifiersSym:D,setLevelSym:W,endSym:F,formatOptsSym:I,messageKeySym:N,errorKeySym:R,nestedKeySym:z,mixinSym:V,levelCompSym:M,useOnlyCustomLevelsSym:J,formattersSym:q,hooksSym:U,nestedKeyStrSym:G,mixinMergeStrategySym:H,msgPrefixSym:K}=f,{epochTime:Y,nullTime:X}=a,{pid:Z}=process,Q=i.hostname(),ee=s.err,et={level:"info",levelComparison:b.ASC,levels:m,messageKey:"msg",errorKey:"err",nestedKey:null,enabled:!0,base:{pid:Z,hostname:Q},serializers:Object.assign(Object.create(null),{err:ee}),formatters:Object.assign(Object.create(null),{bindings:e=>e,level:(e,t)=>({level:t})}),hooks:{logMethod:void 0,streamWrite:void 0},timestamp:Y,name:void 0,redact:null,customLevels:null,useOnlyCustomLevels:!1,depthLimit:5,edgeLimit:100},er=w(et),ei=Object.assign(Object.create(null),s);function pino(...e){let t={},{opts:r,stream:i}=er(t,o(),...e);r.level&&"string"==typeof r.level&&void 0!==m[r.level.toLowerCase()]&&(r.level=r.level.toLowerCase());let{redact:s,crlf:a,serializers:f,timestamp:b,messageKey:w,errorKey:S,nestedKey:O,base:k,name:Z,level:Q,customLevels:ee,levelComparison:et,mixin:ei,mixinMergeStrategy:en,useOnlyCustomLevels:es,formatters:eo,hooks:el,depthLimit:ea,edgeLimit:eu,onChild:ef,msgPrefix:ec}=r,eh=c({maximumDepth:ea,maximumBreadth:eu}),ed=_(eo.level,eo.bindings,eo.log),ep=E.bind({[P]:eh}),eg=s?l(s,ep):{},ey=s?{stringify:eg[A]}:{stringify:ep},em=v.bind(null,{[j]:"",[B]:f,[D]:eg,[T]:E,[P]:eh,[q]:ed}),eb="";null!==k&&(eb=em(void 0===Z?k:Object.assign({},k,{name:Z})));let ew=b instanceof Function?b:b?Y:X,ev=ew().indexOf(":")+1;if(es&&!ee)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(ei&&"function"!=typeof ei)throw Error(`Unknown mixin type "${typeof ei}" - expected "function"`);if(ec&&"string"!=typeof ec)throw Error(`Unknown msgPrefix type "${typeof ec}" - expected "string"`);h(Q,ee,es);let eS=d(ee,es);"function"==typeof i.emit&&i.emit("message",{code:"PINO_CONFIG",config:{levels:eS,messageKey:w,errorKey:S}}),y(et);let e_=g(et);return Object.assign(t,{levels:eS,[M]:e_,[J]:es,[$]:i,[C]:ew,[L]:ev,[T]:E,[P]:eh,[D]:eg,[F]:"}"+(a?"\r\n":"\n"),[I]:ey,[N]:w,[R]:S,[z]:O,[G]:O?`,${JSON.stringify(O)}:{`:"",[B]:f,[V]:ei,[H]:en,[j]:eb,[q]:ed,[U]:el,silent:x,onChild:ef,[K]:ec}),Object.setPrototypeOf(t,u()),p(t),t[W](Q),t}e.exports=pino,e.exports.destination=(e=process.stdout.fd)=>"object"==typeof e?(e.dest=O(e.dest||process.stdout.fd),S(e)):S({dest:O(e),minLength:0}),e.exports.transport=r(2713),e.exports.multistream=r(2425),e.exports.levels=d(),e.exports.stdSerializers=ei,e.exports.stdTimeFunctions=Object.assign({},a),e.exports.symbols=f,e.exports.version=k,e.exports.default=pino,e.exports.pino=pino},8895:(e,t,r)=>{let i=r(7147),s=r(2361),o=r(3837).inherits,l=r(1017),a=r(7737),u=r(9491),f=Buffer.allocUnsafe(0),c="buffer",h="utf8",[d,p]=(process.versions.node||"0.0").split(".").map(Number),g=d>=22&&p>=7;function openFile(e,t){function fileOpened(r,i){if(r){t._reopening=!1,t._writing=!1,t._opening=!1,t.sync?process.nextTick(()=>{t.listenerCount("error")>0&&t.emit("error",r)}):t.emit("error",r);return}let s=t._reopening;t.fd=i,t.file=e,t._reopening=!1,t._opening=!1,t._writing=!1,t.sync?process.nextTick(()=>t.emit("ready")):t.emit("ready"),!t.destroyed&&(!t._writing&&t._len>t.minLength||t._flushPending?t._actualWrite():s&&process.nextTick(()=>t.emit("drain")))}t._opening=!0,t._writing=!0,t._asyncDrainScheduled=!1;let r=t.append?"a":"w",s=t.mode;if(t.sync)try{t.mkdir&&i.mkdirSync(l.dirname(e),{recursive:!0});let o=i.openSync(e,r,s);fileOpened(null,o)}catch(e){throw fileOpened(e),e}else t.mkdir?i.mkdir(l.dirname(e),{recursive:!0},t=>{if(t)return fileOpened(t);i.open(e,r,s,fileOpened)}):i.open(e,r,s,fileOpened)}function SonicBoom(e){let t,r;if(!(this instanceof SonicBoom))return new SonicBoom(e);let{fd:s,dest:o,minLength:l,maxLength:u,maxWrite:d,periodicFlush:p,sync:g,append:y=!0,mkdir:m,retryEAGAIN:b,fsync:w,contentMode:v,mode:S}=e||{};if(s=s||o,this._len=0,this.fd=-1,this._bufs=[],this._lens=[],this._writing=!1,this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this._flushPending=!1,this._hwm=Math.max(l||0,16387),this.file=null,this.destroyed=!1,this.minLength=l||0,this.maxLength=u||0,this.maxWrite=d||16384,this._periodicFlush=p||0,this._periodicFlushTimer=void 0,this.sync=g||!1,this.writable=!0,this._fsync=w||!1,this.append=y||!1,this.mode=S,this.retryEAGAIN=b||(()=>!0),this.mkdir=m||!1,v===c)this._writingBuf=f,this.write=writeBuffer,this.flush=flushBuffer,this.flushSync=flushBufferSync,this._actualWrite=actualWriteBuffer,t=()=>i.writeSync(this.fd,this._writingBuf),r=()=>i.write(this.fd,this._writingBuf,this.release);else if(void 0===v||v===h)this._writingBuf="",this.write=write,this.flush=flush,this.flushSync=flushSync,this._actualWrite=actualWrite,t=()=>i.writeSync(this.fd,this._writingBuf,"utf8"),r=()=>i.write(this.fd,this._writingBuf,"utf8",this.release);else throw Error(`SonicBoom supports "${h}" and "${c}", but passed ${v}`);if("number"==typeof s)this.fd=s,process.nextTick(()=>this.emit("ready"));else if("string"==typeof s)openFile(s,this);else throw Error("SonicBoom supports only file descriptors and files");if(this.minLength>=this.maxWrite)throw Error(`minLength should be smaller than maxWrite (${this.maxWrite})`);this.release=(e,s)=>{if(e){if(("EAGAIN"===e.code||"EBUSY"===e.code)&&this.retryEAGAIN(e,this._writingBuf.length,this._len-this._writingBuf.length)){if(this.sync)try{a(100),this.release(void 0,0)}catch(e){this.release(e)}else setTimeout(r,100)}else this._writing=!1,this.emit("error",e);return}this.emit("write",s);let o=releaseWritingBuf(this._writingBuf,this._len,s);if(this._len=o.len,this._writingBuf=o.writingBuf,this._writingBuf.length){if(!this.sync){r();return}try{do{let e=t(),r=releaseWritingBuf(this._writingBuf,this._len,e);this._len=r.len,this._writingBuf=r.writingBuf}while(this._writingBuf.length)}catch(e){this.release(e);return}}this._fsync&&i.fsyncSync(this.fd);let l=this._len;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):l>this.minLength?this._actualWrite():this._ending?l>0?this._actualWrite():(this._writing=!1,actualClose(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(emitDrain,this)):this.emit("drain"))},this.on("newListener",function(e){"drain"===e&&(this._asyncDrainScheduled=!1)}),0!==this._periodicFlush&&(this._periodicFlushTimer=setInterval(()=>this.flush(null),this._periodicFlush),this._periodicFlushTimer.unref())}function releaseWritingBuf(e,t,r){return"string"==typeof e&&Buffer.byteLength(e)!==r&&(r=Buffer.from(e).subarray(0,r).toString().length),t=Math.max(t-r,0),{writingBuf:e=e.slice(r),len:t}}function emitDrain(e){let t=e.listenerCount("drain")>0;t&&(e._asyncDrainScheduled=!1,e.emit("drain"))}function mergeBuf(e,t){return 0===e.length?f:1===e.length?e[0]:Buffer.concat(e,t)}function write(e){if(this.destroyed)throw Error("SonicBoom destroyed");let t=this._len+e.length,r=this._bufs;return this.maxLength&&t>this.maxLength?this.emit("drop",e):(0===r.length||r[r.length-1].length+e.length>this.maxWrite?r.push(""+e):r[r.length-1]+=e,this._len=t,!this._writing&&this._len>=this.minLength&&this._actualWrite()),this._len<this._hwm}function writeBuffer(e){if(this.destroyed)throw Error("SonicBoom destroyed");let t=this._len+e.length,r=this._bufs,i=this._lens;return this.maxLength&&t>this.maxLength?this.emit("drop",e):(0===r.length||i[i.length-1]+e.length>this.maxWrite?(r.push([e]),i.push(e.length)):(r[r.length-1].push(e),i[i.length-1]+=e.length),this._len=t,!this._writing&&this._len>=this.minLength&&this._actualWrite()),this._len<this._hwm}function callFlushCallbackOnDrain(e){this._flushPending=!0;let onDrain=()=>{if(this._fsync)this._flushPending=!1,e();else try{i.fsync(this.fd,t=>{this._flushPending=!1,e(t)})}catch(t){e(t)}this.off("error",onError)},onError=t=>{this._flushPending=!1,e(t),this.off("drain",onDrain)};this.once("drain",onDrain),this.once("error",onError)}function flush(e){if(null!=e&&"function"!=typeof e)throw Error("flush cb must be a function");if(this.destroyed){let t=Error("SonicBoom destroyed");if(e){e(t);return}throw t}if(this.minLength<=0){e?.();return}e&&callFlushCallbackOnDrain.call(this,e),this._writing||(0===this._bufs.length&&this._bufs.push(""),this._actualWrite())}function flushBuffer(e){if(null!=e&&"function"!=typeof e)throw Error("flush cb must be a function");if(this.destroyed){let t=Error("SonicBoom destroyed");if(e){e(t);return}throw t}if(this.minLength<=0){e?.();return}e&&callFlushCallbackOnDrain.call(this,e),this._writing||(0===this._bufs.length&&(this._bufs.push([]),this._lens.push(0)),this._actualWrite())}function flushSync(){if(this.destroyed)throw Error("SonicBoom destroyed");if(this.fd<0)throw Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift(this._writingBuf),this._writingBuf="");let e="";for(;this._bufs.length||e;){e.length<=0&&(e=this._bufs[0]);try{let t=i.writeSync(this.fd,e,"utf8"),r=releaseWritingBuf(e,this._len,t);e=r.writingBuf,this._len=r.len,e.length<=0&&this._bufs.shift()}catch(r){let t="EAGAIN"===r.code||"EBUSY"===r.code;if(t&&!this.retryEAGAIN(r,e.length,this._len-e.length))throw r;a(100)}}try{i.fsyncSync(this.fd)}catch{}}function flushBufferSync(){if(this.destroyed)throw Error("SonicBoom destroyed");if(this.fd<0)throw Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift([this._writingBuf]),this._writingBuf=f);let e=f;for(;this._bufs.length||e.length;){e.length<=0&&(e=mergeBuf(this._bufs[0],this._lens[0]));try{let t=i.writeSync(this.fd,e);e=e.subarray(t),this._len=Math.max(this._len-t,0),e.length<=0&&(this._bufs.shift(),this._lens.shift())}catch(r){let t="EAGAIN"===r.code||"EBUSY"===r.code;if(t&&!this.retryEAGAIN(r,e.length,this._len-e.length))throw r;a(100)}}}function actualWrite(){let e=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf||this._bufs.shift()||"",this.sync)try{let t=i.writeSync(this.fd,this._writingBuf,"utf8");e(null,t)}catch(t){e(t)}else i.write(this.fd,this._writingBuf,"utf8",e)}function actualWriteBuffer(){let e=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf.length?this._writingBuf:mergeBuf(this._bufs.shift(),this._lens.shift()),this.sync)try{let t=i.writeSync(this.fd,this._writingBuf);e(null,t)}catch(t){e(t)}else g&&(this._writingBuf=Buffer.from(this._writingBuf)),i.write(this.fd,this._writingBuf,e)}function actualClose(e){if(-1===e.fd){e.once("ready",actualClose.bind(null,e));return}void 0!==e._periodicFlushTimer&&clearInterval(e._periodicFlushTimer),e.destroyed=!0,e._bufs=[],e._lens=[],u("number"==typeof e.fd,`sonic.fd must be a number, got ${typeof e.fd}`);try{i.fsync(e.fd,closeWrapped)}catch{}function closeWrapped(){1!==e.fd&&2!==e.fd?i.close(e.fd,done):done()}function done(t){if(t){e.emit("error",t);return}e._ending&&!e._writing&&e.emit("finish"),e.emit("close")}}o(SonicBoom,s),SonicBoom.prototype.reopen=function(e){if(this.destroyed)throw Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(e)});return}if(this._ending)return;if(!this.file)throw Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(e&&(this.file=e),this._reopening=!0,this._writing)return;let t=this.fd;this.once("ready",()=>{t!==this.fd&&i.close(t,e=>{if(e)return this.emit("error",e)})}),openFile(this.file,this)},SonicBoom.prototype.end=function(){if(this.destroyed)throw Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end()});return}!this._ending&&(this._ending=!0,this._writing||(this._len>0&&this.fd>=0?this._actualWrite():actualClose(this)))},SonicBoom.prototype.destroy=function(){this.destroyed||actualClose(this)},SonicBoom.SonicBoom=SonicBoom,SonicBoom.default=SonicBoom,e.exports=SonicBoom},1679:e=>{e.exports=JSON.parse('{"name":"thread-stream","version":"3.1.0","description":"A streaming way to send data to a Node.js Worker Thread","main":"index.js","types":"index.d.ts","dependencies":{"real-require":"^0.2.0"},"devDependencies":{"@types/node":"^20.1.0","@types/tap":"^15.0.0","@yao-pkg/pkg":"^5.11.5","desm":"^1.3.0","fastbench":"^1.0.1","husky":"^9.0.6","pino-elasticsearch":"^8.0.0","sonic-boom":"^4.0.1","standard":"^17.0.0","tap":"^16.2.0","ts-node":"^10.8.0","typescript":"^5.3.2","why-is-node-running":"^2.2.2"},"scripts":{"build":"tsc --noEmit","test":"standard && npm run build && npm run transpile && tap \\"test/**/*.test.*js\\" && tap --ts test/*.test.*ts","test:ci":"standard && npm run transpile && npm run test:ci:js && npm run test:ci:ts","test:ci:js":"tap --no-check-coverage --timeout=120 --coverage-report=lcovonly \\"test/**/*.test.*js\\"","test:ci:ts":"tap --ts --no-check-coverage --coverage-report=lcovonly \\"test/**/*.test.*ts\\"","test:yarn":"npm run transpile && tap \\"test/**/*.test.js\\" --no-check-coverage","transpile":"sh ./test/ts/transpile.sh","prepare":"husky install"},"standard":{"ignore":["test/ts/**/*","test/syntax-error.mjs"]},"repository":{"type":"git","url":"git+https://github.com/mcollina/thread-stream.git"},"keywords":["worker","thread","threads","stream"],"author":"Matteo Collina <hello@matteocollina.com>","license":"MIT","bugs":{"url":"https://github.com/mcollina/thread-stream/issues"},"homepage":"https://github.com/mcollina/thread-stream#readme"}')}};